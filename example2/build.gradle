gradle.afterProject {project, projectState ->
    if (projectState.failure) {
        println "Evaluation of $project FAILED"
    } else {
        println "Evaluation of $project succeeded"
    }
}

gradle.taskGraph.afterTask { Task task, TaskState state ->
    if (state.failure) {
		announce.announce("$task.name FAILED", "local")
        println "$task.name FAILED"
    }
}